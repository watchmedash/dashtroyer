<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anime Gallery</title>
  <link rel="stylesheet" href="anime.css">
</head>
<body>
  <header>
    <h1>Anime Gallery</h1>
  </header>

  <div id="anime-gallery" class="anime-gallery"></div>

  <script>
  async function fetchAnimeList() {
    const response = await fetch('https://cors-anywhere.herokuapp.com/https://api.myanimelist.net/v2/anime/ranking?limit=10', {
      method: 'GET',
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    });
    const data = await response.json();
    return data.data; // Array of anime objects
  }


    async function populateGallery() {
      const animeList = await fetchAnimeList();
      const galleryContainer = document.getElementById('anime-gallery');

      animeList.forEach((anime) => {
        const animeElement = document.createElement('div');
        animeElement.classList.add('anime-item');
        animeElement.innerHTML = `
          <img src="${anime.images.jpg.large_image_url}" alt="${anime.title}" />
          <p>${anime.title}</p>
        `;
        animeElement.addEventListener('click', () => {
          window.location.href = `anime-details.html?malid=${anime.mal_id}`;
        });
        galleryContainer.appendChild(animeElement);
      });
    }

    populateGallery();
  </script>
</body>
</html>
